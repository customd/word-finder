<?php

namespace CustomD\WordFinder\Tests;

use CustomD\WordFinder\Facades\WordFinder;
use CustomD\WordFinder\Grid;
use CustomD\WordFinder\ServiceProvider;
use Orchestra\Testbench\TestCase;
use RuntimeException;

class WordFinderTest extends TestCase
{

    protected $words = [
        'hello',
        'flame',
        'determined',
        'erect',
        'homely',
        'mundane',
        'screeching',
        'erratic',
        'gullible',
        'certain',
        'lace',
        'muddled',
        'groan',
        'thick',
        'old',
        'superb',
        'need',
        'handy',
        'quaint',
        'sip',
        'plain',
        'sense',
        'shop',
        'mom',
        'apathetic',
        'automatic',
        'cloth',
        'pause',
        'early',
        'advise',
        'alleged',
        'disagree',
        'glib',
        'kind',
        'sky',
        'melted',
        'vague',
        'well-made',
        'respect',
        'scent',
        'ludicrous',
        'malicious',
        'tongue',
        'count',
        'whisper',
        'boy',
        'nappy',
        'straight',
        'decisive',
        'long-term',
        'expert',
        'please',
        'plants',
        'good',
        'cough',
        'fog',
        'garrulous',
        'lamp',
        'chickens',
        'possible',
        'stew',
        'trade',
        'gratis',
        'unknown',
        'condemned',
        'baby',
        'forgetful',
        'roomy',
        'jittery',
        'quiet',
        'spiritual',
        'brash',
        'tree',
        'busy',
        'dry',
        'head',
        'part',
        'permit',
        'sweet',
        'eager',
        'even',
        'foamy',
        'robin',
        'grateful',
        'wine',
        'sun',
        'church',
        'plausible',
        'breezy',
        'fry',
        'heady',
        'seemly',
        'hole',
        'temporary',
        'abrupt',
        'compete',
        'veil',
        'brawny',
        'ignorant',
        'fertile',
        'sack',
        'trite',
        'quince',
        'recondite',
        'language',
        'fragile',
        'beam',
        'capable',
        'merciful',
        'rain',
        'road',
        'pet',
        'mice',
        'coat',
        'fallacious',
        'sudden',
        'clip',
        'silk',
        'bumpy',
        'zonked',
        'defeated',
        'prefer',
        'regular',
        'six',
        'ocean',
        'shy',
        'kaput',
        'fine',
        'miss',
        'rings',
        'press',
        'rule',
        'terrific',
        'mushy',
        'deliver',
        'weather',
        'fumbling',
        'wrench',
        'rate',
        'waggish',
        'son',
        'yawn',
        'chilly',
        'bloody',
        'windy',
        'watch',
        'ugly',
        'wistful',
        'shelf',
        'plantation',
        'valuable',
        'puzzled',
        'zany',
        'wholesale',
        'naive',
        'woebegone',
        'minor',
        'camp',
        'behavior',
        'remarkable',
        'astonishing',
        'summer',
        'rightful',
        'miscreant',
        'soak',
        'new',
        'engine',
        'bottle',
        'grab',
        'rainy',
        'gusty',
        'sparkling',
        'sisters',
        'fireman',
        'swing',
        'toy',
        'vessel',
        'sprout',
        'educated',
        'exultant',
        'panicky',
        'ice',
        'drag',
        'depend',
        'monkey',
        'harsh',
        'experience',
        'extra-large',
        'feeling',
        'harmony',
        'laughable',
        'secretary',
        'spade',
        'chin',
        'check',
        'stupendous',
        'oatmeal',
        'zealous',
        'aromatic',
        'look',
        'consist',
        'remember',
        'cut',
        'barbarous',
        'charming',
        'serious',
        'hysterical',
        'smoke',
        'crow',
        'ambiguous',
        'rhetorical',
        'curvy',
        'elfin',
        'sophisticated',
        'breathe',
        'pathetic',
        'fair',
        'squalid',
        'rabid',
        'straw',
        'airport',
        'example',
        'scintillating',
        'button',
        'glove',
        'subdued',
        'raise',
        'toe',
        'hurried',
        'calm',
        'curtain',
        'society',
        'plucky',
        'obnoxious',
        'friction',
        'undress',
        'judge',
        'giraffe',
        'mend',
        'liquid',
        'flowery',
        'roll',
        'amazing',
        'boundary',
        'abundant',
        'string',
        'pretend',
        'cows',
        'avoid',
        'downtown',
        'blushing',
        'mixed',
        'lying',
        'peaceful',
        'cooperative',
        'arrogant',
        'separate',
        'event',
        'energetic',
        'rescue',
        'gigantic',
        'selfish',
        'detail',
        'frame',
        'weary',
        'stone',
        'shake',
        'expect',
        'nose',
        'perfect',
        'governor',
        'evanescent',
        'lyrical',
        'answer',
        'sick',
        'happen',
        'modern',
        'hop',
        'aboriginal',
        'acoustic',
        'harbor',
        'brick',
        'nail',
        'moor',
        'noise',
        'reminiscent',
        'eye',
        'measure',
        'clam',
        'pipe',
        'imported',
        'truculent',
        'drunk',
        'insurance',
        'highfalutin',
        'grate',
        'unnatural',
        'assorted',
        'faint',
        'tangible',
        'nervous',
        'push',
        'absent',
        'irritate',
        'lie',
        'thread',
        'obtainable',
        'filthy',
        'stop',
        'skillful',
        'meaty',
        'icy',
        'roasted',
        'exercise',
        'skirt',
        'deeply',
        'rebel',
        'stove',
        'equal',
        'outgoing',
        'prickly',
        'pricey',
        'balance',
        'twist',
        'wrong',
        'mountainous',
        'crate',
        'melt',
        'release',
        'fuzzy',
        'delightful',
        'daffy',
        'offbeat',
        'threatening',
        'keen',
        'crooked',
        'healthy',
        'mug',
        'incredible',
        'hunt',
        'imminent',
        'tough',
        'afterthought',
        'join',
        'jumbled',
        'damp',
        'transport',
        'thoughtful',
        'dust',
        'wish',
        'hulking',
        'unit',
        'sail',
        'earsplitting',
        'bore',
        'bridge',
        'discussion',
        'pail',
        'remind',
        'real',
        'fire',
        'account',
        'cream',
        'utter',
        'bells',
        'humdrum',
        'plate',
        'approval',
        'name',
        'guttural',
        'aggressive',
        'decide',
        'include',
        'drown',
        'disappear',
        'hospitable',
        'appear',
        'crib',
        'zip',
        'homely',
        'juggle',
        'sigh',
        'colossal',
        'spurious',
        'didactic',
        'ablaze',
        'position',
        'flower',
        'van',
        'rat',
        'weigh',
        'grubby',
        'digestion',
        'angle',
        'narrow',
        'team',
        'abstracted',
        'luxuriant',
        'dress',
        'yak',
        'slow',
        'tired',
        'frightening',
        'face',
        'friends',
        'blue',
        'goofy',
        'productive',
        'crowded',
        'amusement',
        'precious',
        'hollow',
        'stormy',
        'unwritten',
        'wood',
        'tent',
        'embarrassed',
        'curved',
        'innate',
        'elated',
        'sheep',
        'flavor',
        'colorful',
        'root',
        'boiling',
        'hydrant',
        'fish',
        'milk',
        'dam',
        'queue',
        'measly',
        'quarrelsome',
        'horn',
        'ski',
        'paddle',
        'repulsive',
        'toad',
        'ancient',
        'infamous',
        'hushed',
        'dusty',
        'birth',
        'painful',
        'servant',
        'battle',
        'scrawny',
        'gamy',
        'shivering',
        'cause',
        'meal',
        'glorious',
        'peck',
        'men',
        'sore',
        'seashore',
        'drip',
        'versed',
        'impolite',
        'obedient',
        'salty',
        'reflect',
        'erect',
        'wild',
        'mass',
        'pollution',
        'stereotyped',
        'quill',
        'annoyed',
        'perpetual',
        'pink',
        'blink',
        'tan',
        'nebulous',
        'beg',
        'license',
        'horse',
        'circle',
        'thankful',
        'rough',
        'doubt',
        'visit',
        'safe',
        'tricky',
        'silver',
        'fang',
        'alert',
        'mark',
        'dreary',
        'embarrass',
        'staking',
        'creepy',
        'flagrant',
        'edge',
        'desk',
        'hesitant',
        'tire',
        'well-off',
        'milky',
        'remove',
        'sharp',
        'dizzy',
        'unique',
        'sedate',
        'industrious',
        'frightened',
        'scribble',
        'increase',
        'identify',
        'belief',
        'afternoon',
        'dock',
    ];


    protected function getPackageProviders($app)
    {
        return [ServiceProvider::class];
    }

    protected function getPackageAliases($app)
    {
        return [
            'word-finder' => WordFinder::class,
        ];
    }


    public function testDefaultConfigs()
    {
        $config = config('word-finder');
        $this->assertArrayHasKey('default_min_word_length', $config);
        $this->assertArrayHasKey('default_max_word_length', $config);
        $this->assertArrayHasKey('default_grid_size', $config);
    }

    public function testGridThrowsExceptionifGridSizeToSmall()
    {
        $this->expectException(RuntimeException::class);
        WordFinder::create(collect($this->words), 2);
    }

    public function testGridLoadsWithDefaultConfigs()
    {
        $grid = WordFinder::create(collect($this->words), 6, 3, 6);
        $this->assertInstanceOf(Grid::class, $grid);
        $this->assertIsArray($grid->getPuzzleWords()->toArray());
        $this->assertIsString($grid->getTextGrid());
        $this->assertIsArray($grid->getGrid());
    }
}
